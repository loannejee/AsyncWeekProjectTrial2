<!DOCTYPE html>
<html>
  <head>
    <meta charset='utf-8'>
    <meta name='viewport' content='width=device-width initial-scale=1.0'>
    <title>Spin the Wheel</title>
    <link rel="stylesheet" href="/style.css" />
    <script defer src="/bundle.js"></script>
    <script src='/Winwheel.js'></script>

  </head>
  <body>
    <div id="app"></div>
    <!-- <div id="wheelContainer">
      <div class="ticker"></div>
      <canvas id='myCanvas' width='500' height='500'>
        Canvas not supported, use another browser.
      </canvas>
      <script>
        let theWheel = new Winwheel({
          'canvasId' : 'myCanvas',
          'lineWidth' : 3,
          'numSegments' : 8,
          'segments' :
          [
              {'fillStyle' : '#d5f8d7', 'text' : 'Segment 1'},
              {'fillStyle' : '#ffea00', 'text' : 'Segment 2'},
              {'fillStyle' : '#75bbff', 'text' : 'Segment 3'},
              {'fillStyle' : '#e7706f', 'text' : 'Segment 4'},
              {'fillStyle' : '#616161', 'text' : 'Segment 5'},
              {'fillStyle' : '#50c878', 'text' : 'Segment 6'},
              {'fillStyle' : '#e9d5f8', 'text' : 'Segment 7'},
              {'fillStyle' : '#ffa500', 'text' : 'Segment 8'},
          ],
          'pins' : {
            'number'      : 18,
            'outerRadius' : 5,
            'margin'      : 10,
            'fillStyle'   : '#ffff00',
            'strokeStyle' : '#b30000',
            'lineWidth' : 2,
          },
          'animation' : {
            'type'     : 'spinToStop', // Type of animation.
            'duration' : 10,  // How long the animation is to take in seconds.
            'spins'    : 5,   // The number of complete 360 degree rotations the wheel is to do.
            'callbackSound' : 'playSound()', // Specify function to call when sound is to be triggered.
            'soundTrigger'  : 'pin', // Pins trigger the sound for this animation.
            // Remember to do something after the animation has finished specify callback function.
            'callbackFinished' : 'alertPrize()',
            // During the animation need to call the drawTriangle() to re-draw the pointer each frame.
            'callbackAfter' : 'drawTriangle()'
          }
        });

        let audio = new Audio('tick.mp3');

        function playSound() {
        // Stop and rewind the sound (stops it if already playing).
        audio.pause();
        audio.currentTime = 0;
 
        // Play the sound.
        audio.play();
      }

        function addSegment() {
          // Use a date object to set the text of each added segment to the current minutes:seconds
          // (just to give each new segment a different label).
          let date = new Date();
  
          // The Second parameter in the call to addSegment specifies the position,
          // in this case 1 meaning the new segment goes at the start of the wheel.
          theWheel.addSegment( {
              'text' : date.getMinutes() + ':' + date.getSeconds(),
              'fillStyle' : 'aqua'
          }, 1);
  
          // The draw method of the wheel object must be called in order for the changes
          // to be rendered.
          theWheel.draw();
        }


        function deleteSegment() {
          // Call function to remove a segment from the wheel, by default the last one will be
          // removed; you can pass in the number of the segment to delete if desired.
          theWheel.deleteSegment();
  
          // The draw method of the wheel object must be called to render the changes.
          theWheel.draw();
        }

        // This function called after the spin animation has stopped.
        function alertPrize() {
          // Call getIndicatedSegment() function to return pointer to the segment pointed to on wheel.
          let winningSegment = theWheel.getIndicatedSegment();
  
          // Basic alert of the segment text which is the prize name.
          alert("You have won " + winningSegment.text + "!");
        }


        function drawTriangle() {
          // Get the canvas context the wheel uses.
          let ctx = theWheel.ctx;
  
          ctx.strokeStyle = 'black';     // Set line colour.
          ctx.fillStyle   = '#ffad00';     // Set fill colour.
          ctx.lineWidth   = 2;
          ctx.beginPath();              // Begin path.
          ctx.moveTo(170, 5);           // Move to initial position.
          ctx.lineTo(230, 5);           // Draw lines to make the shape.
          ctx.lineTo(200, 40);
          ctx.lineTo(171, 5);
          ctx.stroke();                 // Complete the path by stroking (draw lines).
          ctx.fill();                   // Then fill.
        }

      </script>
    </div>

    <button onClick="addSegment();">Add Segment</button>
    <button onClick="deleteSegment();">Delete Segment</button>
    <button onClick="theWheel.startAnimation();">Spin the Wheel</button> -->
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.9.1/gsap.min.js"></script>
  </body>
</html>

